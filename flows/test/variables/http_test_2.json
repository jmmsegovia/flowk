{
  "id": "http_test_2",
  "description": "Get Dogg facts test",
  "tasks": [
    {
      "id": "vars.loop_control",
      "description": "Initializes loop control variables",
      "action": "VARIABLES",
      "scope": "flow",
      "overwrite": true,
      "vars": [
        {
          "name": "loopvar",
          "type": "number",
          "value": 0
        },
        {
          "name": "increment",
          "type": "number",
          "value": 1
        }
      ]
    },
    {
      "id": "000",
      "description": "Get dog facts",
      "action": "HTTP_REQUEST",
      "protocol": "HTTPS",
      "method": "GET",
      "url": "https://dogapi.dog/api/v2/breeds",
      "headers": {
        "Accept": "application/json",
        "Content-Type": "application/json"
      }
    },
    {
      "id": "vars.increment_counter",
      "description": "Increments the counter by adding the value of the increment variable",
      "action": "VARIABLES",
      "scope": "flow",
      "overwrite": true,
      "vars": [
        {
          "name": "loopvar",
          "type": "number",
          "operation": {
            "operator": "add",
            "variable": "increment"
          }
        }
      ]
    },
    {
      "id": "exitFromLoop",
      "description": "Exits from loop",
      "action": "EVALUATE",
      "if_conditions": [
        {
          "left": "${loopvar}",
          "operation": "<",
          "right": 4
        }
      ],
      "then": {
        "continue": "We continue looping!"
      },
      "else": {
        "exit": "Exiting!!"
      }
    },
    {
      "id": "evaluateLifeMaxAndMin",
      "description": "Affenpinscher life checks",
      "action": "EVALUATE",
      "if_conditions": [
        {
          "left": "${from.task:000.result$.body.data[?(@.attributes.name=='Affenpinscher')].attributes.life.max}",
          "operation": "=",
          "right": 16
        },
        {
          "left": "${from.task:000.result$.body.data[?(@.attributes.name=='Affenpinscher')].attributes.life.min}",
          "operation": "=",
          "right": 12
        }
      ],
      "then": {
        "continue": "Result expected OK"
      },
      "else": {
        "sleep": 5,
        "gototaskid": "000"
      }
    }
  ]
}
