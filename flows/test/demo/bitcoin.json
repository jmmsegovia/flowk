{
  "id": "bitcoin_price_flow",
  "description": "Flow to get the current Bitcoin price in euros",
  "tasks": [
    {
      "id": "get_bitcoin_price",
      "description": "Query the CoinGecko API to get the current Bitcoin price in EUR",
      "action": "HTTP_REQUEST",
      "protocol": "HTTPS",
      "method": "GET",
      "url": "https://api.coingecko.com/api/v3/simple/price?ids=bitcoin&vs_currencies=eur",
      "headers": {
        "Accept": "application/json"
      }
    },
    {
      "id": "store_price",
      "description": "Store the Bitcoin price in a variable",
      "action": "VARIABLES",
      "vars": [
        {
          "name": "bitcoin_price_eur",
          "type": "number",
          "value": "${from.task:get_bitcoin_price.result$.response.body.bitcoin.eur}"
        }
      ]
    },
    {
      "id": "print_result",
      "description": "Show the result",
      "action": "PRINT",
      "entries": [
        {
          "message": "The current Bitcoin price is: ${bitcoin_price_eur} EUR"
        }
      ]
    }
  ]
}